<div class="edit-product">
  <h1>Edit Product</h1>

  <div *ngIf="loading">Loading product...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <form *ngIf="!loading && !error">
    <label>
      Name:
      <input type="text" [(ngModel)]="product.name" name="name" />
    </label>

    <label>
      Price:
      <input type="number" [(ngModel)]="product.price" name="price" />
    </label>

    <label>
      Quantity:
      <input type="number" [(ngModel)]="product.quantity" name="quantity" />
    </label>

    <label>
      Description:
      <textarea [(ngModel)]="product.description" name="description"></textarea>
    </label>

    <!-- ================= IMAGE SECTION ================= -->
    <div class="image-section">
      <h3>Product Images</h3>

      <!-- Existing images -->
      <div class="existing-images" *ngIf="images.length > 0">
        <div class="image-card" *ngFor="let img of images">
          <img [src]="img.imagePath" alt="Product Image" />
          <button mat-button color="warn" (click)="deleteImage(img)">Delete</button>
        </div>
      </div>

      <!-- Add new images -->
      <input type="file" (change)="onFileSelected($event)" multiple />
      <button
        mat-raised-button
        color="primary"
        (click)="uploadImages()"
        [disabled]="uploading || newFiles.length === 0"
      >
        Upload Selected Images
      </button>
    </div>

    <div class="buttons">
      <button mat-raised-button color="primary" (click)="save()">Save</button>
      <button mat-raised-button color="warn" (click)="cancel()">Cancel</button>
    </div>
  </form>
</div>
